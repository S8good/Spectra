# 拉曼光谱核心功能需求清单

## 1. 数据采集功能

### 1.1 硬件控制
- **激发波长设置**：支持多种激发波长选项（如532nm、633nm、785nm等）
- **积分时间调整**：可设置10ms至10000ms的积分时间
- **扫描平均**：支持多次扫描平均以提高信噪比
- **激光功率控制**：可调节激光输出功率（如果硬件支持）

### 1.2 数据获取
- **单次测量**：获取单张拉曼光谱
- **连续测量**：实时连续采集拉曼光谱数据
- **背景采集**：专门用于采集背景光谱
- **参考光谱采集**：用于标准化测量结果

## 2. 预处理功能

### 2.1 基线校正
- **多项式基线校正**：去除荧光背景
- **ALS（不对称最小二乘）基线**：适用于复杂背景
- **手动基线调整**：允许用户交互式调整基线

### 2.2 噪声过滤
- **Savitzky-Golay平滑**：保留峰形的同时降噪
- **移动平均**：简单有效的降噪方法
- **中值滤波**：去除尖锐噪声

### 2.3 背景扣除
- **自动背景扣除**：使用采集的背景光谱
- **智能背景估计**：适用于无背景光谱的情况

### 2.4 归一化
- **峰高归一化**：将最高峰归一化到1
- **面积归一化**：将光谱积分面积归一化到1
- **标准物质归一化**：使用已知标准物质的特征峰进行归一化

## 3. 分析功能

### 3.1 特征峰识别
- **自动峰检测**：基于阈值和二阶导数
- **峰位精确定位**：支持多种算法（最高顶点、重心、高斯拟合等）
- **峰强度计算**：包括峰高和峰面积

### 3.2 拉曼位移计算
- **波长到波数转换**：根据激发波长计算拉曼位移
- **波数校准**：使用标准物质进行波数校准
- **多激发波长支持**：不同激发波长下的拉曼位移计算

### 3.3 峰拟合
- **高斯拟合**：适用于对称峰
- **洛伦兹拟合**：适用于展宽峰
- **Voigt拟合**：结合高斯和洛伦兹特性
- **多峰拟合**：同时拟合多个重叠峰

### 3.4 定量分析
- **峰面积定量**：基于峰面积的浓度计算
- **校准曲线**：建立峰强度与浓度的关系

## 4. 可视化功能

### 4.1 光谱显示
- **波长/波数切换**：在波长和波数坐标之间切换
- **多光谱叠加**：同时显示多条光谱进行比较
- **放大功能**：局部区域放大查看

### 4.2 峰标记
- **自动峰标记**：在光谱上标记识别出的峰
- **手动峰标记**：允许用户手动标记感兴趣的峰
- **峰信息显示**：显示峰位、强度、半高宽等信息

### 4.3 颜色映射
- **强度颜色映射**：使用颜色表示强度变化
- **峰识别结果可视化**：不同颜色标记不同类型的峰

### 4.4 3D可视化
- **时间序列3D**：显示随时间变化的拉曼光谱
- **浓度序列3D**：显示不同浓度下的拉曼光谱

## 5. 拉曼特定工具

### 5.1 SERS分析
- **SERS增强因子计算**：计算表面增强拉曼散射增强因子
- **SERS基底评估**：评估不同基底的增强效果

### 5.2 特征峰数据库
- **内置标准物质库**：常见物质的拉曼特征峰
- **用户自定义库**：允许用户添加和管理自定义物质
- **谱库搜索**：根据测量光谱搜索匹配的物质

### 5.3 高级分析
- **化学计量学分析**：PCA、PLS等多元统计分析
- **机器学习分类**：基于拉曼光谱的物质分类
- **光谱去卷积**：分离重叠峰

## 6. 数据管理功能

### 6.1 数据保存
- **原始数据保存**：保存未处理的原始光谱
- **处理后数据保存**：保存预处理和分析后的结果
- **元数据保存**：保存测量条件、参数等元数据

### 6.2 数据导出
- **常见格式支持**：CSV、TXT、SPC等格式
- **图像导出**：导出光谱图像（PNG、SVG等）
- **报告导出**：生成包含分析结果的报告

### 6.3 数据导入
- **支持多种格式**：导入外部拉曼光谱数据
- **批量导入**：同时导入多个光谱文件
- **数据转换**：将其他格式转换为内部格式

## 7. 用户界面需求

### 7.1 控制面板
- **模式切换**：快速切换到拉曼模式
- **参数调整**：实时调整测量参数
- **快捷操作**：常用功能的一键访问

### 7.2 图表区域
- **多图表布局**：支持不同类型的图表组合
- **交互式操作**：鼠标悬停显示详细信息，拖拽选择区域
- **实时更新**：连续测量时实时更新图表

### 7.3 工作流程
- **向导式操作**：引导用户完成复杂分析
- **模板支持**：保存和加载分析模板
- **批量处理**：同时处理多个光谱文件

## 8. 性能要求

### 8.1 响应速度
- **实时显示**：测量数据实时显示
- **快速分析**：峰识别和拟合在秒级完成
- **批量处理效率**：高效处理大量光谱数据

### 8.2 准确性
- **波长精度**：保证波长测量的准确性
- **波数计算精度**：精确计算拉曼位移
- **峰位识别精度**：准确识别和定位特征峰

### 8.3 可靠性
- **数据完整性**：确保数据不丢失
- **错误处理**：友好的错误提示和恢复机制
- **稳定性**：长时间运行的稳定性

## 9. 扩展性

### 9.1 硬件兼容性
- **多光谱仪支持**：兼容不同型号的拉曼光谱仪
- **硬件抽象层**：便于添加新的硬件支持

### 9.2 功能扩展
- **插件系统**：支持添加新的分析方法和工具
- **API接口**：提供编程接口供其他应用调用

### 9.3 未来功能
- **远程控制**：通过网络远程控制测量
- **云存储**：将数据存储到云端
- **人工智能集成**：利用AI提高分析准确性
